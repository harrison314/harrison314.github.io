<!DOCTYPE html><html lang=sk><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=X-Xss-Protection content="1; mode=block"><meta http-equiv=X-Content-Type-Options content=nosniff><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed" href=/feed.rss><link rel=alternate type=application/atom+xml title="Atom Feed" href=/feed.atom><meta name=author content=harrison314><title>Čo ma naučilo IoT</title><meta property=og:title content="Čo ma naučilo IoT"><meta property=og:description content="Blog o tom, čo som sa naučil pri hraní s IoT."><meta property=og:url content=https://harrison314.github.io/CoMaNauciloIot.html><meta property=og:image content=https://harrison314.github.io/images/CoMaNauciloIot/esp8266.jpg><meta name=description content="Blog o tom, čo som sa naučil pri hraní s IoT."><link href=css/bootstrap.min.css rel=stylesheet><link href=css/blog-post.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><style>img{max-width:100%}.img-center{display:block;margin-left:auto;margin-right:auto}</style><body><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=index.html>harrison314 blog</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/All.html>Obsah</a><li><a href=/DevelopingAll.html>Programovanie</a><li><a href=/GeneralAll.html>Všeobecné</a><li><a href=/OMne.html>O mne</a></ul></div></div></nav><div class=container><div class=row><div class="col-lg-8 col-md-8"><h1>Čo ma naučilo IoT</h1><div class=publishDate>Júl 2020</div><p>Medzi moje koníčky patrí aj&nbsp;IoT. Predovštekým som sa pomocou neho chcel zlepšiť v&nbsp;C/C++ a&nbsp;vyskúšať si iné programovanie, ako bežne robím v&nbsp;práci. Je iné mať k&nbsp;dispozícii 8GB a&nbsp;iné 80KB RAM.<p>Pôvodne som rozmýšľal o&nbsp;tom zadovážiť si <em>Raspberry Pi</em> a&nbsp;vyrobiť si meteostanicu, ale&nbsp;odradili ma veci ako absencia obvod reálneho času, komplikovanejšie pripojenie snímačov, SD karta (radi odchádzajú kvôli zápisom Linuxu). Ale&nbsp;náhodou som narazil na&nbsp;vývojovú sadu <em>ESP-201</em> osadenú modulom <em><a href=https://en.wikipedia.org/wiki/ESP8266>ESP8266</a></em>.<p>S <em>ESP8266</em> sa začínalo ľahko, najskôr v&nbsp;<em>Arduino IDE</em> (rozhodne to nie je IDE), neskôr vo Visual Studiu s&nbsp;pluginom pre&nbsp;vývoj jedno-čipových dosiek. To mi umožňovalo použiť C++11 a&nbsp;tým sa starosti zo&nbsp;správou pamäte stali minulosťou (<a href=https://en.cppreference.com/w/cpp/memory/unique_ptr>uniq_ptr</a>).<p><img src=images/CoMaNauciloIot/esp8266.jpg class=img-center alt=ESP2866><p>Nakoniec sa mi podarilo meteostanicu vytvoriť. <em>ESP8266</em> zbieralo dáta každých 5 minút a&nbsp;raz za&nbsp;pol hodinu sa pripojilo na&nbsp;WiFi, pomocou protokolu <a href=https://en.wikipedia.org/wiki/MQTT>MQTT</a> odoslalo údaje na&nbsp;<em>Azure IoT Hub</em>, kde&nbsp;ich jedna <em>Azure Function</em> uložila do&nbsp;<em>Blob Storage</em>. Ďalšia Azure funkcia mi fungovala ako minimalistická stránka s&nbsp;REST API.<p>O asi dva roky sa mi dostala do&nbsp;rúk vývojová doska <a href="https://www.avnet.com/shop/us/products/avnet-engineering-services/aes-ms-mt3620-sk-g-3074457345636825680/">Avnet MT3620 Starter Kit</a> s&nbsp;<a href="https://azure.microsoft.com/en-us/services/azure-sphere/">Azure Sphere</a>. <em>Azure Sphere</em> je systém na&nbsp;čipe vyvinutý Microsoftom pre&nbsp;moderné IoT aplikácie a&nbsp;snaží sa pomôcť riešiť ich najpálčivejšie problémy. Po&nbsp;technickej stránke obsahuje jadro <em>ARM Cortex-A7</em> a&nbsp;dve jadrá <em>Cortex-M4</em>. No&nbsp;hlavný rozdiel s&nbsp;pohľadu vývoja je, že&nbsp;<em>Azure Sphere</em> je pripravený pre&nbsp;priemyselné použitie.<p><img src=images/CoMaNauciloIot/azure-sphere.jpg class=img-center alt="Avnet MT3620 Starter Kit"><p>Na <em>Azure Sphere</em> je možné požiť dva procesory, jeden klasický, na&nbsp;ktorom beží malý Linux a&nbsp;druhý pre&nbsp;realtime proces (ak chceme využiť realtime proccesor, tak sa nasadzujúd dva programy - jeden bežiaci pod OS na&nbsp;jednom procesore a&nbsp;druhý pre&nbsp;realtime procesor, tieto programi môžu kominukovať pomocou zasielania správ). Samozrejmosťou je aj&nbsp;vyriešená podpora aktualizácií, certificate pinning,… No&nbsp;najviac ma zaujalo, že&nbsp;s aplikáciou sa nasazduje manifest, ktorý&nbsp;funguje ako firewall – definujú sa na&nbsp;ňom, na&nbsp;aké domény môže doska pristupovať, ktoré hardvérové piny idú na&nbsp;čo použiť,… To celé posúva bezpečnosť tejto dosky niekde úplne inde, ako je v&nbsp;IoT zvykom.<p><img src=images/CoMaNauciloIot/graphic-mcu.png class=img-center alt="Azure Sphere"><br> (Zdroj: <a href=https://docs.microsoft.com/en-us/azure-sphere/product-overview/what-is-azure-sphere>https://docs.microsoft.com/en-us/azure-sphere/product-overview/what-is-azure-sphere</a>)<h2 id=co-ma-naucilo-iot>Čo ma naučilo IoT?</h2><h4 id=ine-programovanie>Iné programovanie</h4><p>Programovaním IoT zariadení sa človek dostáva do&nbsp;úplne iného sveta ako pri&nbsp;programovaní backendu. Zrazu musí šetriť pamäť a&nbsp;počíta každý bajt a&nbsp;to nie len počas behu programu v&nbsp;RAM, ale&nbsp;aj pri&nbsp;prenose (<em>SigFox</em>, <em>Lora</em>). Niekedy treba šetriť aj&nbsp;batériu.<p>Zaujímavou skúsenosťou je programovanie na&nbsp;niečo, čo&nbsp;nemá operačný systém. Ďalšími aspektami sú hardvérové prerušenia, globálne premenné vynútené API, obtiažne logovanie,…<h4 id=neverit-knizniciam>Neveriť knižniciam</h4><p>Počas experimentovania s&nbsp;metostanicou som potreboval pre&nbsp;<em>ESP8266</em> rôzne knižnice pre&nbsp;protokoly, senzory a&nbsp;mnoho z&nbsp;nich malo chyby a&nbsp;plno z&nbsp;nich chýbali akékoľvek náznaky zabezpečenia.<p>Keďže to „I“ v&nbsp;IoT je internet, tak bezpečnosť by mala hrať adekvátnu rolu.<p>V jednom prípade šlo o&nbsp;<em>MQTT</em> knižnicu, ktorá trpela <em>buffer owerflow</em> zraniteľnosťou. (Ak niekoho napadne, že&nbsp;v jeho obľúbenom jazyku by sa to nestalo, tak treba vedieť, že&nbsp;pri malej RAM by sa z&nbsp;<em>buffer owerflow</em> stala <em>DoS</em> zraniteľnosť.)<h4 id=arduino-je-na-vzdelavanie>Arduino je na&nbsp;vzdelávanie</h4><p><em>Arduino</em> a&nbsp;<em>Raspberry Pi</em> boli vymyslené na&nbsp;vzdelávanie a&nbsp;hranie sa, nie je dobre ich používať na&nbsp;seriózne veci. Na&nbsp;sériovú výrobu sa nehodia, <em>Razzbery Pi</em> používa SD-kartu, ktorá rada odchádza,…<p>Tieto „hračky“ sa naozaj hodia na&nbsp;vzdelávanie a&nbsp;prototypovanie, no&nbsp;pre priemyselné použitie a&nbsp;domácu automatizáciu odporúčam použiť veci na&nbsp;to určené (kludne aj&nbsp;<em>Azure Sphere</em>, ten bol konštruovaný pre&nbsp;priemysel a&nbsp;používa ho napríklad <a href="https://news.microsoft.com/transform/starbucks-turns-to-technology-to-brew-up-a-more-personal-connection-with-its-customers/">Starbucks</a>).<h2 id=zaver>Záver</h2><p>Vďaka IoT som si vyskúšal iný pohľad na&nbsp;programovanie. Najmä človeka teší, že&nbsp;to čo&nbsp;vytvoril má nejakú fyzickú podobu, reaguje to v&nbsp;skutočnom svete a&nbsp;dá sa to chytiť do&nbsp;ruky.</div><div class="col-lg-4 col-md-4 hidden-xs hidden-sm"><div class=well><h4>Vývoj</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/RankFunctions.html>MS SQL a RANK funkcie</a><li><a href=/MongoDbVsRavenDb.html>MongoDB vs. RavenDB</a><li><a href=/WinHttp.html>Použitie WinHTTP</a><li><a href=/BinaryContentInApi.html>ASP.NET Core API a binárny obsah</a><li><a href=/PerformaceInNet.html>Meranie performace pre dotnetistov</a><li><a href=/CngApiTips.html>Triky s Windows CNG API</a><li><a href=/InMemoryOltp.html>Experiment s In-Memory OLTP</a><li><a href=/CoMaNauciloIot.html>Čo ma naučilo IoT</a><li><a href=/SkEid.html>eID nie je platobná karta</a><li><a href=/eVolby.html>Elektronické voľby</a><li><a href=/DevelopingAll.html>…</a></ul></div></div></div><div class=well><h4>Všeobecné</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/EzoGenerator.html>Generátor Ezo textov</a><li><a href=/AlternativnyRecept.html>Propagácia alternatívnej medicíny</a><li><a href=/VotrelciDavnoveku.html>Votrelci dávnoveku</a><li><a href=/GeneralAll.html>…</a></ul></div></div></div><div class=well><h4>O mne</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/OMne.html>O mne</a><li><a href=/OMneOdkazy.html>Moja tvorba inde</a><li><a href=/Portfolio.html>Portólio</a></ul></div></div></div></div></div><hr><footer><div class=row><div class="col-lg-8 col-sm-8"><div class=well><h4>Našli ste chybu, alebo chcete niečo doplniť?</h4><p>Ak ste našli chybu v článu, chcete niečo dopniť, alebo sa vyjadriť k téme, môžete na <a href="https://github.com/harrison314/harrison314.github.io/issues/new?title=%C4%8Co%20ma%20nau%C4%8Dilo%20IoT&amp;body=https%3A%2F%2Fharrison314.github.io%2FCoMaNauciloIot.html" target=_blank>Githube otvoriť issue</a>.</div></div></div><div class=row><div class=col-lg-12><p>Copyright © harrison314 2013</div></div></footer></div><script src=js/jquery.js></script><script src=js/bootstrap.min.js></script>