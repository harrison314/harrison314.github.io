<!DOCTYPE html><html lang=sk><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=X-Xss-Protection content="1; mode=block"><meta http-equiv=X-Content-Type-Options content=nosniff><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed" href=feed.rss><meta name=author content=harrison314><meta name=generator content=AspNetStatic><title>&#x10C;o ma nau&#x10D;ilo IoT</title><meta property=og:title content="Čo ma naučilo IoT"><meta property=og:description content="Blog o tom, čo som sa naučil pri hraní s IoT."><meta property=og:url content=https://harrison314.github.io/CoMaNauciloIot.html><meta property=og:image content=https://harrison314.github.io/images/CoMaNauciloIot/esp8266.jpg><meta name=description content="Blog o tom, čo som sa naučil pri hraní s IoT."><link href=css/bootstrap.min.css rel=stylesheet><link href=css/blog-post.css rel=stylesheet><script type=text/x-mathjax-config>
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel=stylesheet href=css/Highiler/vs.css><style>img{max-width:100%}.img-center{display:block;margin-left:auto;margin-right:auto}</style><body><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=index.html>harrison314 blog</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/All.html>Obsah</a><li><a href=/DevelopingAll.html>Programovanie</a><li><a href=/GeneralAll.html>Všeobecné</a><li><a href=/OMne.html>O mne</a></ul></div></div></nav><div class=container><div class=row><div class="col-lg-8 col-md-8"><h1>&#x10C;o ma nau&#x10D;ilo IoT</h1><div class=publishDate>J&#xFA;l 2020</div><p>Medzi moje koníčky patrí aj&#160;IoT. Predovštekým som sa pomocou neho chcel zlepšiť v&#160;C/C++ a&#160;vyskúšať si iné programovanie, ako bežne robím v&#160;práci. Je iné mať k&#160;dispozícii 8GB a&#160;iné 80KB RAM.<p>Pôvodne som rozmýšľal o&#160;tom zadovážiť si <em>Raspberry Pi</em> a&#160;vyrobiť si meteostanicu, ale&#160;odradili ma veci ako absencia obvod reálneho času, komplikovanejšie pripojenie snímačov, SD karta (radi odchádzajú kvôli zápisom Linuxu). Ale&#160;náhodou som narazil na&#160;vývojovú sadu <em>ESP-201</em> osadenú modulom <em><a href=https://en.wikipedia.org/wiki/ESP8266>ESP8266</a></em>.<p>S <em>ESP8266</em> sa začínalo ľahko, najskôr v&#160;<em>Arduino IDE</em> (rozhodne to nie je IDE), neskôr vo Visual Studiu s&#160;pluginom pre&#160;vývoj jedno-čipových dosiek. To mi umožňovalo použiť C++11 a&#160;tým sa starosti zo&#160;správou pamäte stali minulosťou (<a href=https://en.cppreference.com/w/cpp/memory/unique_ptr>uniq_ptr</a>).<p><img src=images/CoMaNauciloIot/esp8266.jpg class=img-center alt=ESP2866><p>Nakoniec sa mi podarilo meteostanicu vytvoriť. <em>ESP8266</em> zbieralo dáta každých 5 minút a&#160;raz za&#160;pol hodinu sa pripojilo na&#160;WiFi, pomocou protokolu <a href=https://en.wikipedia.org/wiki/MQTT>MQTT</a> odoslalo údaje na&#160;<em>Azure IoT Hub</em>, kde&#160;ich jedna <em>Azure Function</em> uložila do&#160;<em>Blob Storage</em>. Ďalšia Azure funkcia mi fungovala ako minimalistická stránka s&#160;REST API.<p>O asi dva roky sa mi dostala do&#160;rúk vývojová doska <a href="https://www.avnet.com/shop/us/products/avnet-engineering-services/aes-ms-mt3620-sk-g-3074457345636825680/">Avnet MT3620 Starter Kit</a> s&#160;<a href="https://azure.microsoft.com/en-us/services/azure-sphere/">Azure Sphere</a>. <em>Azure Sphere</em> je systém na&#160;čipe vyvinutý Microsoftom pre&#160;moderné IoT aplikácie a&#160;snaží sa pomôcť riešiť ich najpálčivejšie problémy. Po&#160;technickej stránke obsahuje jadro <em>ARM Cortex-A7</em> a&#160;dve jadrá <em>Cortex-M4</em>. No&#160;hlavný rozdiel s&#160;pohľadu vývoja je, že&#160;<em>Azure Sphere</em> je pripravený pre&#160;priemyselné použitie.<p><img src=images/CoMaNauciloIot/azure-sphere.jpg class=img-center alt="Avnet MT3620 Starter Kit"><p>Na <em>Azure Sphere</em> je možné požiť dva procesory, jeden klasický, na&#160;ktorom beží malý Linux a&#160;druhý pre&#160;realtime proces (ak chceme využiť realtime proccesor, tak sa nasadzujúd dva programy - jeden bežiaci pod OS na&#160;jednom procesore a&#160;druhý pre&#160;realtime procesor, tieto programi môžu kominukovať pomocou zasielania správ). Samozrejmosťou je aj&#160;vyriešená podpora aktualizácií, certificate pinning,&#8230; No&#160;najviac ma zaujalo, že&#160;s aplikáciou sa nasazduje manifest, ktorý&#160;funguje ako firewall – definujú sa na&#160;ňom, na&#160;aké domény môže doska pristupovať, ktoré hardvérové piny idú na&#160;čo použiť,&#8230; To celé posúva bezpečnosť tejto dosky niekde úplne inde, ako je v&#160;IoT zvykom.<p><img src=images/CoMaNauciloIot/graphic-mcu.png class=img-center alt="Azure Sphere"><br> (Zdroj: <a href=https://docs.microsoft.com/en-us/azure-sphere/product-overview/what-is-azure-sphere>https://docs.microsoft.com/en-us/azure-sphere/product-overview/what-is-azure-sphere</a>)<h2 id=co-ma-naucilo-iot>Čo ma naučilo IoT?</h2><h4 id=ine-programovanie>Iné programovanie</h4><p>Programovaním IoT zariadení sa človek dostáva do&#160;úplne iného sveta ako pri&#160;programovaní backendu. Zrazu musí šetriť pamäť a&#160;počíta každý bajt a&#160;to nie len počas behu programu v&#160;RAM, ale&#160;aj pri&#160;prenose (<em>SigFox</em>, <em>Lora</em>). Niekedy treba šetriť aj&#160;batériu.<p>Zaujímavou skúsenosťou je programovanie na&#160;niečo, čo&#160;nemá operačný systém. Ďalšími aspektami sú hardvérové prerušenia, globálne premenné vynútené API, obtiažne logovanie,&#8230;<h4 id=neverit-knizniciam>Neveriť knižniciam</h4><p>Počas experimentovania s&#160;metostanicou som potreboval pre&#160;<em>ESP8266</em> rôzne knižnice pre&#160;protokoly, senzory a&#160;mnoho z&#160;nich malo chyby a&#160;plno z&#160;nich chýbali akékoľvek náznaky zabezpečenia.<p>Keďže to „I“ v&#160;IoT je internet, tak bezpečnosť by mala hrať adekvátnu rolu.<p>V jednom prípade šlo o&#160;<em>MQTT</em> knižnicu, ktorá trpela <em>buffer owerflow</em> zraniteľnosťou. (Ak niekoho napadne, že&#160;v jeho obľúbenom jazyku by sa to nestalo, tak treba vedieť, že&#160;pri malej RAM by sa z&#160;<em>buffer owerflow</em> stala <em>DoS</em> zraniteľnosť.)<h4 id=arduino-je-na-vzdelavanie>Arduino je na&#160;vzdelávanie</h4><p><em>Arduino</em> a&#160;<em>Raspberry Pi</em> boli vymyslené na&#160;vzdelávanie a&#160;hranie sa, nie je dobre ich používať na&#160;seriózne veci. Na&#160;sériovú výrobu sa nehodia, <em>Razzbery Pi</em> používa SD-kartu, ktorá rada odchádza,&#8230;<p>Tieto „hračky“ sa naozaj hodia na&#160;vzdelávanie a&#160;prototypovanie, no&#160;pre priemyselné použitie a&#160;domácu automatizáciu odporúčam použiť veci na&#160;to určené (kludne aj&#160;<em>Azure Sphere</em>, ten bol konštruovaný pre&#160;priemysel a&#160;používa ho napríklad <a href="https://news.microsoft.com/transform/starbucks-turns-to-technology-to-brew-up-a-more-personal-connection-with-its-customers/">Starbucks</a>).<h2 id=zaver>Záver</h2><p>Vďaka IoT som si vyskúšal iný pohľad na&#160;programovanie. Najmä človeka teší, že&#160;to čo&#160;vytvoril má nejakú fyzickú podobu, reaguje to v&#160;skutočnom svete a&#160;dá sa to chytiť do&#160;ruky.</div><div class="col-lg-4 col-md-4 hidden-xs hidden-sm"><div class=well><h4>V&#xFD;voj</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/GitPatch.html>Ako posla&#x165; komit emailom</a><li><a href=/ModerneHtml.html>Renderova&#x165; HTML na serveri nie je hanba</a><li><a href=/InterpolatedStringAsHtmlTemplate.html>Interpolated strings ako HTML &#x161;abl&#xF3;na</a><li><a href=/PqcCert.html>Hybridn&#xE9; certifik&#xE1;ty v C#</a><li><a href=/1brc.html>One Billion Rows Challenge</a><li><a href=/MigraciaBlogu.html>Migr&#xE1;cia blogu</a><li><a href=/PostKvantovaKryptografia.html>Post-kvantov&#xE1; kryptografia v C#</a><li><a href=/BouncyHsm.html>Ako som robil BouncyHsm</a><li><a href=/BuildAutomation.html>Pre&#x10D;o pou&#x17E;&#xED;va&#x165; build automation</a><li><a href=/KeyValueDB.html>Ako na Key-Value datab&#xE1;zu</a><li><a href=/DevelopingAll.html>&#8230;</a></ul></div></div></div><div class=well><h4>V&#x161;eobecn&#xE9;</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/EzoGenerator.html>Gener&#xE1;tor Ezo textov</a><li><a href=/AlternativnyRecept.html>Propag&#xE1;cia alternat&#xED;vnej medic&#xED;ny</a><li><a href=/VotrelciDavnoveku.html>Votrelci d&#xE1;vnoveku</a><li><a href=/GeneralAll.html>&#8230;</a></ul></div></div></div><div class=well><h4>O mne</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/VyvojarskeOdkazy.html>Moje vyvojarske blogy</a><li><a href=/OMne.html>O mne</a><li><a href=/OMneOdkazy.html>Moja tvorba inde</a><li><a href=/Portfolio.html>Portólio</a></ul></div></div></div></div></div><hr><footer><div class="row no-print"><div class="col-lg-8 col-sm-8"><div class=well><h4>Našli ste chybu, alebo chcete niečo doplniť?</h4><p>Ak ste našli chybu v článu, chcete niečo dopniť, alebo sa vyjadriť k téme, môžete na <a href="https://github.com/harrison314/harrison314.github.io/issues/new?title=%C4%8Co%20ma%20nau%C4%8Dilo%20IoT&amp;body=https%3A%2F%2Fharrison314.github.io%2FCoMaNauciloIot.html" target=_blank>Githube otvoriť issue</a>.</div></div></div><div class=row><div class=col-lg-12><p>Copyright &copy; harrison314 2013<span class=on-print> - https://harrison314.github.io/</span></div></div></footer></div><script src=js/jquery.js></script><script src=js/bootstrap.min.js></script>