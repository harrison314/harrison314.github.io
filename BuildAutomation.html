<!DOCTYPE html><html lang=sk><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=X-Xss-Protection content="1; mode=block"><meta http-equiv=X-Content-Type-Options content=nosniff><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed" href=/feed.rss><link rel=alternate type=application/atom+xml title="Atom Feed" href=/feed.atom><meta name=author content=harrison314><title>Prečo používať build automation</title><meta property=og:title content="Prečo používať build automation"><meta property=og:description content="Prečo používať build automation tooly a predstavenie Cake Build a NUKE."><meta property=og:url content=https://harrison314.github.io/BuildAutomation.html><meta property=og:image content=https://harrison314.github.io/images/BuildAutomation/media.png><meta name=description content="Prečo používať build automation tooly a predstavenie Cake Build a NUKE."><link href=css/bootstrap.min.css rel=stylesheet><link href=css/blog-post.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script><script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]--><style>img{max-width:100%}.img-center{display:block;margin-left:auto;margin-right:auto}</style><body><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href=index.html>harrison314 blog</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/All.html>Obsah</a><li><a href=/DevelopingAll.html>Programovanie</a><li><a href=/GeneralAll.html>Všeobecné</a><li><a href=/OMne.html>O mne</a></ul></div></div></nav><div class=container><div class=row><div class="col-lg-8 col-md-8"><h1>Prečo používať build automation</h1><div class=publishDate>Júl 2023</div><p>Za svoju kariéru som sa stretol s&nbsp;rôznym spôsobom ako buldovať dotnetovské projekty, od&nbsp;použitia <em>Visual Studia</em>, cez <em>.bat</em> súbory, <em>Powershell</em> a&nbsp;nakoniec som skončil pri&nbsp;build automation tooloch (konkrétne <em>Cake</em> a&nbsp;<em>Nuke</em>).<p>Späť by som sa už nevrátil. Prečo? <strong>Lebo tieto nástroje šetria čas a&nbsp;nervy.</strong><h2 id=co-je-to-build-automation-tool>Čo je to build automation tool</h2><p>Pri vytvorení artefaktov projektu nejde len o&nbsp;to niečo skompilovať, treba s&nbsp;tým spraviť plno iných drobných vecí. To zahŕňa odstránenie starých artefaktov, kompiláciu závislých projektov, podpísanie binárok, konverziu dokumentácie do&nbsp;vhodného formátu, pridanie ďalších súborov do&nbsp;projektu (licencie, vygenerované SQL migrácie, konfiguráciu,…) a&nbsp;nakoniec vytvorenie balíčkov pre&nbsp;inštaláciu (<em>zip</em>, <em>msi</em>, <em>deb</em>,…) a&nbsp;nezabudnúť ju správne pomenovať.<p>K tomu celému je často v&nbsp;projekte viac výsledných inštalačných balíkov a&nbsp;nugetov. Taktiež je pred tým potrebné pustiť unit testy, či&nbsp;zaistiť rozdielne správanie pre&nbsp;release a&nbsp;prerelease build.<p>A práve tieto úlohy dokáže automatizovať build automation tool. Nie je to kompilátor, je o&nbsp;úroveň vyššie.<p class="text-center font-italic" :=""><img src=images/BuildAutomation/plan.png class=img-center alt="Znázornenie targetov v NUKE."> Znázornenie závislostí medzi úlohami - NUKE (<a href=https://ithrowexceptions.com/2020/06/05/reusable-build-components-with-interface-default-implementations.html>zdroj</a>).<h2 id=preco-pouzivat-build-automation>Prečo používať build automation</h2><p>… pre&nbsp;.NET (aj v&nbsp;porovnaní so&nbsp;štandardami CI/CD pipelinami):<ul><li>zdieľanie vedomostí v&nbsp;tíme a&nbsp;zastupiteľnosť kolegov,<li>build všetkých projektov sa spúšťa rovnako,<li>build funguje rovnako lokálne u vývojára ako na&nbsp;build serveri,<li>proces buildovania je možné odladiť lokálne (v gite nebude tisíc komitov pre&nbsp;úpravu YAML definície pipeline – do&nbsp;YAML proste breakpoint nedáš) ,<li>zníženie vendor-locku (nie je to napísané vo vendor špecifickej YAML pipeline), pri&nbsp;použití CI/CD je potrebný YAML jednoduchý (len spúšťa build automation tool), rovnakú definíciu je možné použiť na&nbsp;väčšinu projektov a&nbsp;napísať túto definíciu pre&nbsp;iného vendora nie je náročné,<li>pomocou targetov je možné spustiť rozne úlohy v&nbsp;CI/CD pipleine (napr. <em>test</em>, <em>build</em>, <em>publish</em>,…),<li>žiadne magické stringy, žiadne skryté požiadavky a&nbsp;menej prekvapení,<li>nie je to mágia, ale&nbsp;známy jazyk a&nbsp;knižnice a&nbsp;dokonca aj&nbsp;IDE.</ul><p>V podstate celý proces buildovania (vrátane testov a&nbsp;uploadu artefaktov) sme presunuli z&nbsp;„ručnej roboty“ alebo&nbsp;YAML-u do&nbsp;programu, ktorému rozumieme.<h2 id=cake-a-nuke>Cake a&nbsp;NUKE</h2><p><em>Cake</em> (C# Make) a&nbsp;<em>NUKE</em> sú oba build automation tooly pre&nbsp;.NET a&nbsp;MS Build. Oba viac menej dokážu to isté a&nbsp;podobným spôsobom.<p>Čo majú spoločné:<ul><li>pre inicializáciu používajú .NET global tool,<li>sú multiplatformové,<li>majú slušnú komunitu,<li>ide o&nbsp;DSL nad jazykom C# (závislosti, úlohy, cleanup, buildovanie, práca so&nbsp;súbormi, globing, version control, notifikácie,…),<li>vedia buildovať aj&nbsp;iné ako .NET projekty,<li>orientujú sa na&nbsp;úlohy (tasky/targety) so&nbsp;vzájomnými závislosťami,<li>ich funkcionalita ide rozšíriť pomocou nugetov (stále je to C#),<li>zdieľanie kódu je tiež možné pomocou nugetov,<li>majú podporu najznámejších test runnerov,<li>dokážu artefakty deploynúť a&nbsp;nasadiť (to sa často nepoužíva),<li>majú širokú podporu rozšírení a&nbsp;toolov (<em>dotnet</em>, <em>MS Build</em>, <em>node.js</em>, <em>EsLint</em>, <em>upack</em>, <em>Docker</em>, <em>OpenCover</em>, <em>Sonarqube</em>, <em>git</em>, <em>Wix</em>, <em>Yarn</em>,…),<li>majú dobre vyriešené logovanie.</ul><p>Čo majú rozdielne:<ul><li><em>Cake</em> je napísaný ako „skript“ (v <em>.cake</em> súbore – vie s&nbsp;ním pracovať <em>Visual Studio Code</em>, plus je na&nbsp;to plugin),<li><em>NUKE</em> používa .NET projekt priamo v&nbsp;solution (takže natívna podpora IDE),<li>ku rozšíriteľnosti pristupujú trochu inak,<li>príde mi, že&nbsp;<em>Cake</em> má viac extrených toolov/addonov,<li><em>Cake</em> je vhodnejšie aj&nbsp;pre projekty s&nbsp;<em>.Net Frameworkom</em>,<li><em>NUKE</em> dokaźe deklaratívne používať dotnet global tools,<li><em>NUKE</em> dokáže parsovať <em>.sln</em> a&nbsp;<em>.csproj</em> súbory,<li><em>NUKE</em> vie generovať YAML súbory pre&nbsp;známe CI/CD riešenia.</ul><h3 id=cake>Cake</h3><table class="table table-borderless"><tbody><tr><td class=col-md-4>Stránka<td class=col-md-8><a href="https://cakebuild.net/" target=_blank>https://cakebuild.net/</a><tr><td class=col-md-4>Ako začať<td class=col-md-8><a href=https://cakebuild.net/docs/getting-started/setting-up-a-new-scripting-project target=_blank>https://cakebuild.net/docs/getting-started/setting-up-a-new-scripting-project</a><tr><td class=col-md-4>Github<td class=col-md-8><a href=https://github.com/cake-build/cake target=_blank>https://github.com/cake-build/cake</a><tr><td class=col-md-4>Integrácia na&nbsp;treťostranné baličky<td class=col-md-8><a href="https://cakebuild.net/extensions/" target=_blank>https://cakebuild.net/extensions/</a><tr><td class=col-md-4>Ukážka použitia<td class=col-md-8><a href=https://github.com/harrison314/PkcsExtensions/blob/master/build/build.cake target=_blank>https://github.com/harrison314/PkcsExtensions/blob/master/build/build.cake</a></table><h3 id=nuke>NUKE</h3><table class="table table-borderless"><tbody><tr><td class=col-md-4>Stránka<td class=col-md-8><a href="https://nuke.build/" target=_blank>https://nuke.build/</a><tr><td class=col-md-4>Ako začať<td class=col-md-8><a href="https://nuke.build/docs/getting-started/installation/" target=_blank>https://nuke.build/docs/getting-started/installation/</a><tr><td class=col-md-4>Github<td class=col-md-8><a href=https://github.com/nuke-build/nuke target=_blank>https://github.com/nuke-build/nuke</a><tr><td class=col-md-4>Integrácia na&nbsp;treťostranné baličky<td class=col-md-8><a href="https://nuke.build/docs/common/cli-tools/" target=_blank>https://nuke.build/docs/common/cli-tools/</a><tr><td class=col-md-4>Ukážka použitia<td class=col-md-8><a href=https://github.com/harrison314/Area52/blob/main/build/BuildProject/Build.cs target=_blank>https://github.com/harrison314/Area52/blob/main/build/BuildProject/Build.cs</a></table><h2 id=ktory-si-vybrat>Ktorý si vybrať?</h2><p>Typický príklad použitia týchto nástrojov je, že&nbsp;pri release builde sa spustia unit testy, do&nbsp;buildu sa vrazí git komit a&nbsp;nejaké premenné prostredia, výsledok sa zozipuje, dopíše sa verzia a&nbsp;niekde sa uploadne artefakt. Na&nbsp;čo bohate stačia oba tieto nástroje.<p>Oba tieto tooly sú dobré a&nbsp;dokážu podobné veci trochu iným prístupom. Čokoľvek, čo&nbsp;ide spraviť v&nbsp;C# ide spraviť aj&nbsp;pomocou týchto nástrojov.<p><em>NUKE</em> je viac deklaratívne, tým ma človek ľahší začiatok a&nbsp;pokiaľ netreba naozaj špeciálne veci tak bohate stačí. Taktiež je príjemné mať intellisense vďaka tomu, že&nbsp;ide o&nbsp;konzolovú aplikáciu v&nbsp;rámci solution.<p><em>Cake</em> je viac imperatívne, osobne ho používam o&nbsp;dosť dlhšie a&nbsp;možno aj&nbsp;pre to mi príde trochu univerzálnejšie, navyše vyhráva v&nbsp;počte integrácii na&nbsp;treťostranné služby a&nbsp;programy.<h2 id=zaver>Záver</h2><p>Myslím, že&nbsp;keď si človek vyberie hociktorý nástroj (<em>Cake</em>, <em>NUKE</em>), tak na&nbsp;začiatku nespraví chybu. Navyše kód pre&nbsp;build automation nebýva dlhý, tak to ide ľahko prepísať.<p>A ako som spomínal, už len samotné použitie takéhoto nástroja šetrí čas a&nbsp;nervy.<p>Osobne mi tieto nástroje priniesli hlavne to, že&nbsp;si viem buildy rýchlo odladiť lokálne. A&nbsp;keď som na&nbsp;dovolenke, tak mi nemusí nik volať ohľadom buidlovania knižnice <em>XY</em>, ktorú nutne potrebuje na&nbsp;vyriešenie bugu.</div><div class="col-lg-4 col-md-4 hidden-xs hidden-sm"><div class=well><h4>Vývoj</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/BouncyHsm.html>Ako som robil BouncyHsm</a><li><a href=/BuildAutomation.html>Prečo používať build automation</a><li><a href=/KeyValueDB.html>Ako na Key-Value databázu</a><li><a href=/RankFunctions.html>MS SQL a RANK funkcie</a><li><a href=/MongoDbVsRavenDb.html>MongoDB vs. RavenDB</a><li><a href=/WinHttp.html>Použitie WinHTTP</a><li><a href=/BinaryContentInApi.html>ASP.NET Core API a binárny obsah</a><li><a href=/PerformaceInNet.html>Meranie performace pre dotnetistov</a><li><a href=/CngApiTips.html>Triky s Windows CNG API</a><li><a href=/InMemoryOltp.html>Experiment s In-Memory OLTP</a><li><a href=/DevelopingAll.html>…</a></ul></div></div></div><div class=well><h4>Všeobecné</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/EzoGenerator.html>Generátor Ezo textov</a><li><a href=/AlternativnyRecept.html>Propagácia alternatívnej medicíny</a><li><a href=/VotrelciDavnoveku.html>Votrelci dávnoveku</a><li><a href=/GeneralAll.html>…</a></ul></div></div></div><div class=well><h4>O mne</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/VyvojarskeOdkazy.html>Moje vyvojarske blogy</a><li><a href=/OMne.html>O mne</a><li><a href=/OMneOdkazy.html>Moja tvorba inde</a><li><a href=/Portfolio.html>Portólio</a></ul></div></div></div></div></div><hr><footer><div class="row no-print"><div class="col-lg-8 col-sm-8"><div class=well><h4>Našli ste chybu, alebo chcete niečo doplniť?</h4><p>Ak ste našli chybu v článu, chcete niečo dopniť, alebo sa vyjadriť k téme, môžete na <a href="https://github.com/harrison314/harrison314.github.io/issues/new?title=Pre%C4%8Do%20pou%C5%BE%C3%ADva%C5%A5%20build%20automation&amp;body=https%3A%2F%2Fharrison314.github.io%2FBuildAutomation.html" target=_blank>Githube otvoriť issue</a>.</div></div></div><div class=row><div class=col-lg-12><p>Copyright © harrison314 2013<span class=on-print> - https://harrison314.github.io/</span></div></div></footer></div><script src=js/jquery.js></script><script src=js/bootstrap.min.js></script>