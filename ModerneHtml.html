<!DOCTYPE html><html lang=sk><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=X-Xss-Protection content="1; mode=block"><meta http-equiv=X-Content-Type-Options content=nosniff><meta name=viewport content="width=device-width, initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed" href=feed.rss><meta name=author content=harrison314><meta name=generator content=AspNetStatic><title>Renderova&#x165; HTML na serveri nie je hanba</title><meta property=og:title content="Renderovať HTML na serveri nie je hanba"><meta property=og:description content="Renderovať HTML na serveri nie je v roku 2025 hanba. Moderné možnosti HTML, Streaming HTML, SSE, HTTP/2 s použitím knižnice HTMX – pre tvorbu serverom riadených klientskych aplikácií s minimom javascriptu."><meta property=og:url content=https://harrison314.github.io/ModerneHtml.html><meta property=og:image content=https://harrison314.github.io/images/ModerneHtml/fullstack-md.jpg><meta name=description content="Renderovať HTML na serveri nie je v roku 2025 hanba. Moderné možnosti HTML, Streaming HTML, SSE, HTTP/2 s použitím knižnice HTMX – pre tvorbu serverom riadených klientskych aplikácií s minimom javascriptu."><link href=css/bootstrap.min.css rel=stylesheet><link href=css/blog-post.css rel=stylesheet><script type=text/x-mathjax-config>
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script><script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><link rel=stylesheet href=css/Highiler/vs.css><style>img{max-width:100%}.img-center{display:block;margin-left:auto;margin-right:auto}</style><body><nav class="navbar navbar-inverse navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=index.html>harrison314 blog</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/All.html>Obsah</a><li><a href=/DevelopingAll.html>Programovanie</a><li><a href=/GeneralAll.html>Všeobecné</a><li><a href=/OMne.html>O mne</a></ul></div></div></nav><div class=container><div class=row><div class="col-lg-8 col-md-8"><h1>Renderova&#x165; HTML na serveri nie je hanba</h1><div class=publishDate>M&#xE1;j 2025</div><p>V tomto blogu chcem zhrnúť moderné<sup>*</sup> možnosti použitia HTTP a&#160;HTML v&#160;prístupoch tvorby interaktívnych webových aplikácii s&#160;veľmi malým množstvom javascriptu.<p><em>*</em> moderne tu znamená, že&#160;tieto princípy fungovali už keď&#160;som začínal s&#160;PHP v&#160;roku 2008, ale&#160;vďaka HTTP/2, novým CSS možnostiam, HTML tagom a&#160;knižniciam sa začali používať.<h2 id=htmx>HTMX</h2><p><a href="https://htmx.org/">HTMX</a> je jednosúborová knižnica, ktorá v&#160;roku 2024 zobrala frontend frameworky útokom, umožňuje tvorbu interaktívnych webových aplikácii (teda toho, čo&#160;je teraz doménou SPA). A&#160;to celé pomocou server-renderingu a&#160;HTML atribútov, pričom od&#160;serveru sa chce len to, aby&#160;dokázal vrátiť kúsky HTML. Sám autor HTMX dúfa v&#160;to, že&#160;HTMX zanikne a&#160;atribúty, ktoré HTMX pridáva sa dostanú do&#160;štandardného HTML.<p>HTMX je na&#160;prvý pohľad knižnica, ktorá pridáva do&#160;HTML niekoľko atribútov, ktoré umožňujú spraviť HTTP request z&#160;akéhokoľvek tagu na&#160;akúkoľvek udalosť a&#160;výsledok umiestniť niekam na&#160;stránku. To dokáže aj&#160;<em>jQuery</em>, tak kde&#160;je rozdiel? Rozdiel je v&#160;tom, že&#160;HTMX je deklaratívne ale&#160;hlavne so&#160;sebou prináša inú paradigmu v&#160;tvorbe UI, je to nástroj, ktorý&#160;ponúkla dosť, aby&#160;sa v&#160;ňom dal spraviť e-shop, biznis aplikáciu, manažment portál,&#8230; proste 80% vecí na&#160;ktoré sa teraz používa React/Angular/Vue.<p>Povedzme, že&#160;máme SPA aplikáciu, kde&#160;klikneme na&#160;linku pre&#160;načítanie dát do&#160;tabuľky podľa zvolených filtrov:<ul><li>V reaktej SPA, sa cez store odpáli javascript klient pre&#160;REST API, ten zavolá fetch na&#160;dáta na&#160;serveri, na&#160;serveri sa dáta vytiahnu z&#160;databázy, z&#160;dát sa vytvorí JSON, ktorý&#160;sa vráti browseru, ten ho pomocou klienta rozparsuje, vytvorí sa akcia, zavolá sa reducer, updatne sa store, vyrenderujú sa všetky komponenty do&#160;virtuálneho DOM-u, ten sa porovná s&#160;predchádzajúcim virtuálnym DOM-om, a&#160;updatne sa HTML na&#160;stránke.<li>V HTML stránke s&#160;HTMX sa odošle request na&#160;server, server sa pozrie do&#160;databázy, vyrenderuje HTML, odošle ho na&#160;klienta a&#160;HTMX zmení HTML v&#160;stránke.</ul><p><img src=images/ModerneHtml/before-after-htmx-md.jpg class=img-center alt="HTMX UI example"><p>Treba podotknúť, že&#160;HTMX dokáže nahradzovať viaceré časti stránky na&#160;jeden response a&#160;tiež, že&#160;v načítaných fragmentoch HTML fungujú jeho atribúty automaticky.<p>HTMX má vyriešené napríklad lazy-loading, debouncing, loading indocator, vie použiť history API v&#160;prehliadača, v&#160;príkladoch má ukážky na&#160;inline-editing, tranzitions, morphing a&#160;<a href="https://htmx.org/examples/">mnohé ďalšie</a>.<p>Na to prečo a&#160;ako použiť HTMX sú tu iné články (linkujem ich nižšie), skôr chcem pridať svoje postrehy z&#160;troch hoby projektov, ktoré som pomocou HTMX robil:<ul><li>HTMX je jednoduchý, nie však primitívny, myslím, že&#160;si ho proste treba vyskúšať.<li>Počet endpointov voči SPA aplikácii zostane približne rovnaký, len namiesto JSON-u budú vracať kúsky HTML.<li>Pri použití HTMX som nemal pocit, že&#160;ide o&#160;mágiu, lebo&#160;mám pod kontrolou aj&#160;request aj&#160;response a&#160;nič sa nedeje samo.<li>Vďaka moderným CSS selektorom netreba targetovať ciele HTML len pomocou id-čka, ale&#160;ide použiť direktívy ako <code>next table</code>.<li>Osvedčila sa mi kombinácia <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-10.0&amp;tabs=visual-studio">ASP.NET Core Minimal API</a>, HTMX a&#160;<a href=https://github.com/DamianEdwards/RazorSlices>RazorSlices</a>. Takže endpoint, model, (prípadne <a href=https://github.com/martinothamar/Mediator>mediátor handler</a>), a&#160;šablónu ide mať v&#160;rovnakom adresári, poprípade mať v&#160;adresári všetko potrebne ku&#160;komponente. Samozrejme ide použiť aj&#160;izolácia CSS a&#160;AOT kompiláciu!<li>Pre zobrazenie chýb je vhodné použiť <code>hx-swap-oob</code>, alebo&#160;<a href="https://htmx.org/headers/hx-redirect/">HX-Redirect HTTP hlavičku</a>.<li>Pri mojich hoby projektoch som javascript nepotreboval. No&#160;HTMX neotvorí dialógové okno (aj to dialógové okno ide dnes otvoriť pomocou HTML), na&#160;takúto klientsku interakciu ide použiť knižnicu <a href="https://alpinejs.dev/">Alpine.js</a>, ktorá má podobne deklaratívnu filozofiu.<li>Ak bude potrebné využiť nejaké komponenty, ktoré interagujú na&#160;strane klienta, tak je možné použiť web componenty.</ul><p>Samozrejme HTMX nie je strieborná guľka, ale&#160;vďaka nemu viem tvoriť rovnaké webové aplikácie bez&#160;NPM, oveľa rýchlejšie, jednoduchšie a&#160;z menším počtom riadkov kódov.<h3 id=prakticky-priklad>Praktický príklad</h3><p>Nasleduje príklad, v&#160;ktorom sa zobrazujú logy, je v&#160;nich možné vyhľadávať, zoraďovať a&#160;zobraziť podľa kategórie.<p>Pri použití HTMX stačí z&#160;modrej oblasti spraviť formulár (označený modrou farbou) zo&#160;štandardnými HTML elementami a&#160;pridať mu tieto atribúty:<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>&lt;</span><span style=color:#A31515>form</span> <span style=color:Red>hx-get</span><span style=color:Blue>=</span><span style=color:Blue>&quot;/logs&quot;</span> 
      <span style=color:Red>hx-target</span><span style=color:Blue>=</span><span style=color:Blue>&quot;next tbody&quot;</span> 
      <span style=color:Red>hx-trigger</span><span style=color:Blue>=</span><span style=color:Blue>&quot;input changed delay:500ms, keyup[key==&#39;Enter&#39;], select changed, submit, load&quot;</span> 
      <span style=color:Red>hx-indicator</span><span style=color:Blue>=</span><span style=color:Blue>&quot;#spinner&quot;</span><span style=color:Blue>&gt;</span> 
 &#8230; 
</pre></div></div><p><code>hx-get</code> hovorí kam sa má poslať GET požiadavka, na&#160;vyhľadanie logov s&#160;parametrami (tie sa získajú s&#160;inputov),<br> <code>hx-target</code> hovorí, že&#160;obsah vrátený zo&#160;serveru sa umiestni do&#160;nasledujúceho tagu <code>tbody</code>,<br> <code>hx-trigger</code> hovorí, na&#160;aká udalosti reagovať, je tam zahrnutý debouncing, aj&#160;úvodné načítanie,<br> <code>hx-indicator</code> hovorí, kde&#160;sa nachdza <em>loading inidicator</em>.<p><img src=images/ModerneHtml/HtmxExample.png class=img-center alt="HTMX UI example"><p>Šablóna pre&#160;zobrazenie logov (na obrázku oblasti označené zelenou farbou) vyzerá takto:<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
@foreach (LogEntity log in Model.Logs) 
{ 
    <span style=color:Blue>&lt;</span><span style=color:#A31515>tr</span><span style=color:Blue>&gt;</span> 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span>@log.Time.ToString(&quot;dd.MM.yyyy HH:mm:ss&quot;)<span style=color:Blue>&lt;/</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span> 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span>@log.Ip<span style=color:Blue>&lt;/</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span> 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span>@log.Host<span style=color:Blue>&lt;/</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span> 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;</span><span style=color:#A31515>span</span> <span style=color:Red>class</span><span style=color:Blue>=</span><span style=color:Blue>&quot;@CreateBage(log.Type)&quot;</span><span style=color:Blue>&gt;</span>@log.Type<span style=color:Blue>&lt;/</span><span style=color:#A31515>span</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span> 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span>@log.Content<span style=color:Blue>&lt;/</span><span style=color:#A31515>td</span><span style=color:Blue>&gt;</span> 
    <span style=color:Blue>&lt;/</span><span style=color:#A31515>tr</span><span style=color:Blue>&gt;</span> 
} 

<span style=color:Blue>&lt;</span><span style=color:#A31515>div</span> <span style=color:Red>id</span><span style=color:Blue>=</span><span style=color:Blue>&quot;LoadOther&quot;</span> <span style=color:Red>hx-swap-oob</span><span style=color:Blue>=</span><span style=color:Blue>&quot;true&quot;</span><span style=color:Blue>&gt;</span> 
    @if (Model.RenderNext) 
    { 
        <span style=color:Blue>&lt;</span><span style=color:#A31515>button</span> <span style=color:Red>type</span><span style=color:Blue>=</span><span style=color:Blue>&quot;button&quot;</span> <span style=color:Red>class</span><span style=color:Blue>=</span><span style=color:Blue>&quot;btn btn-outline-secondary&quot;</span> 
           <span style=color:Red>hx-get</span><span style=color:Blue>=</span><span style=color:Blue>&quot;@Model.NextUrl&quot;</span> 
           <span style=color:Red>hx-target</span><span style=color:Blue>=</span><span style=color:Blue>&quot;previous tbody&quot;</span> 
           <span style=color:Red>hx-trigger</span><span style=color:Blue>=</span><span style=color:Blue>&quot;click&quot;</span> 
           <span style=color:Red>hx-indicator</span><span style=color:Blue>=</span><span style=color:Blue>&quot;#spinner&quot;</span> 
           <span style=color:Red>hx-swap</span><span style=color:Blue>=</span><span style=color:Blue>&quot;beforeend&quot;</span><span style=color:Blue>&gt;</span> 
            Load more 
        <span style=color:Blue>&lt;/</span><span style=color:#A31515>button</span><span style=color:Blue>&gt;</span> 
    } 
<span style=color:Blue>&lt;/</span><span style=color:#A31515>div</span><span style=color:Blue>&gt;</span> 
</pre></div></div><p>Server vráti obsah pre&#160;<code>tbody</code> a&#160;obsah pre&#160;tlačidlo <em>&quot;Load more&quot;</em>, ten je oanotovaný atribútom <code>hx-swap-oob=&quot;true&quot;</code>, pretože&#160;sa umiestňuje mimo tabuľky a&#160;má na&#160;sebe rovnaké štyri HTMX tribúty (ale s&#160;URL vrátane parametrov) a&#160;<code>hx-swap=&quot;beforeend&quot;</code>, aby&#160;sa donačítané logy umiestnili na&#160;koniec tabuľky.<p>A to je všetko.<h3 id=zdroje-ku-htmx>Zdroje ku&#160;HTMX</h3><p>Tu sú nejaké zdroje o&#160;HTMX a&#160;kedy ho použiť a&#160;nepoužiť:<ol><li><a href="https://htmx.org/">https://htmx.org/</a> - hlavná stránka projektu,<li><a href=https://hexshift.medium.com/10-underused-htmx-hooks-that-can-take-your-frontend-from-good-to-great-64812d9da905>https://hexshift.medium.com/10-underused-htmx-hooks-that-can-take-your-frontend-from-good-to-great-64812d9da905</a> - triky s&#160;udalosťami,<li><a href=https://medium.com/@simsketch/understanding-htmx-building-modern-web-applications-with-html-4792b9ce1083>https://medium.com/@simsketch/understanding-htmx-building-modern-web-applications-with-html-4792b9ce1083</a> - zhrnutie HTMX s&#160;príkladmi použitia,<li><a href=https://medium.com/@alexander.heerens/htmx-patterns-01-how-to-build-a-multi-step-form-in-htmx-554d4c2a3f36>https://medium.com/@alexander.heerens/htmx-patterns-01-how-to-build-a-multi-step-form-in-htmx-554d4c2a3f36</a> - <em>Multi-Step Form in HTMX</em>,<li><a href=https://medium.com/@alexander.heerens/micro-frontends-with-htmx-266b457490b9>https://medium.com/@alexander.heerens/micro-frontends-with-htmx-266b457490b9</a> - <em>Micro Frontends with HTMX</em>,<li><a href=https://medium.com/pragmatic-programmers/server-driven-web-apps-with-htmx-2ecb93e60f09>https://medium.com/pragmatic-programmers/server-driven-web-apps-with-htmx-2ecb93e60f09</a> - <em>Server-Driven Web Apps with htmx</em>,<li><a href="https://www.youtube.com/watch?v=hA6DQZLFwi0">https://www.youtube.com/watch?v=hA6DQZLFwi0</a><li><a href="https://htmx.org/essays/a-real-world-react-to-htmx-port/">https://htmx.org/essays/a-real-world-react-to-htmx-port/</a> - ukážka konverzie reálnej aplikácie z&#160;reactu,<li><a href="https://htmx.org/essays/another-real-world-react-to-htmx-port/">https://htmx.org/essays/another-real-world-react-to-htmx-port/</a> - ukážka konverzie reálnej aplikácie z&#160;reactu,<li><a href=https://github.com/khalidabuhakmeh/Htmx.Net>https://github.com/khalidabuhakmeh/Htmx.Net</a> - Htmx.Net - HTMX tag helpre pre&#160;ASP.NET Core,<li><a href=https://github.com/DamianEdwards/RazorSlices>https://github.com/DamianEdwards/RazorSlices</a> - <em>RazorSlices</em> - AOT kompatibilná knižnica pre&#160;Razor šblóny a&#160;Minimal API,<li>obrázky sú priamo zo&#160;stránky <a href="https://htmx.org/">https://htmx.org/</a>.</ol><h2 id=sse>SSE</h2><p><em>Server-Sent Events</em> je HTTP mechanizmus, ktorým môže server informovať klienta o&#160;udalostiach na&#160;serveri formou zaslanej správy. Ide o&#160;bežný HTTP request, no&#160;odpoveď má nastavené <code>TransferEncoding</code> na&#160;<code>chunked</code>. Nerozdivel od&#160;Web-Socketov ide o&#160;jednosmerný kanál, ktorý&#160;dokáže naplno využiť možnosti protokolu HTTP/2, ale&#160;netreba naň ďalší port ani&#160;špeciálne pravidlá na&#160;firewally.<p>Pomocou Minimal API v&#160;.NET 10 idú jednoducho implementovať:<div class="lang-cs editor-colors"><div style=color:Black;background-color:White><pre>
async IAsyncEnumerable&lt;SseItem&lt;<span style=color:Blue>string</span>&gt;&gt; GetStockValues(CancellationToken cancellationToken) 
{
    <span style=color:Blue>double</span> lastValue = 0.0; 
    <span style=color:Blue>while</span>(!cancellationToken.IsCancellationRequested) 
    { 
        <span style=color:Blue>double</span> value = Random.Shared.NextDouble() * 100.0; 
        <span style=color:Blue>string</span> mark = value &gt; lastValue ? <span style=color:#A31515>&quot;&amp;#8657;&quot;</span> : <span style=color:#A31515>&quot;&amp;#8659;&quot;</span>; 
        <span style=color:Blue>string</span> html = $<span style=color:#A31515>&quot;&lt;p&gt;SSE coin - {value:.00} EUR &lt;span&gt;{mark}&lt;/span&gt;&lt;/p&gt;&quot;</span>; 

        <span style=color:Blue>yield</span> <span style=color:Blue>return</span> <span style=color:Blue>new</span> SseItem&lt;<span style=color:Blue>string</span>&gt;(html); 

        lastValue = value; 
        await Task.Delay(2000 + Random.Shared.Next(-100, 300), cancellationToken); 
    } 
}

app.MapGet(<span style=color:#A31515>&quot;/stockPrice&quot;</span>, (CancellationToken cancellationToken) 
{ 
   <span style=color:Blue>return</span> TypedResults.ServerSentEvents(GetStockValues(cancellationToken)); 
});
</pre></div></div><p>A jednoducho konzumovať pomocou javascriptu:<div class="lang-js editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>const</span> evtSource = <span style=color:Blue>new</span> EventSource(<span style=color:#A31515>&quot;/stockPrice&quot;</span>); 
evtSource.onmessage = (event) =&gt; { 
  document.getElementById(<span style=color:#A31515>&#39;stockPrice&#39;</span>).innerHTML = JSON.parse(event.data); 
}; 
</pre></div></div><p>Vďaka HTMX ale&#160;nemusíme posielať cez SSE len JSON, ale&#160;aj kusy HTML, ktoré je vďaka atribútu <code>hx-swap-oob</code> umiestniť kamkoľvek na&#160;stránku. Takže jedným SSE pripojením je možné riešiť viac udalostí - napríklad aktualizovať ceny <em>SSE coinu</em> a&#160;súčasne zobrazovať notifikácie.<p>Pre HTMX je potrebné použiť <a href="https://htmx.org/extensions/sse/">oficíalne rozšírenie pre&#160;SSE</a>.<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>&lt;</span><span style=color:#A31515>div</span> <span style=color:Red>hx-ext</span><span style=color:Blue>=</span><span style=color:Blue>&quot;sse&quot;</span> <span style=color:Red>sse-connect</span><span style=color:Blue>=</span><span style=color:Blue>&quot;/stockPrice&quot;</span> <span style=color:Red>sse-swap</span><span style=color:Blue>=</span><span style=color:Blue>&quot;message&quot;</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>div</span><span style=color:Blue>&gt;</span> 
</pre></div></div><h3 id=zdroje-pre-sse>Zdroje pre&#160;SSE</h3><ol><li><a href=https://kotlin-htmx.fly.dev/demo/htmx/checkboxes>https://kotlin-htmx.fly.dev/demo/htmx/checkboxes</a> - <em>100 000</em> relatime checkboxov pomouu HTMX a&#160;SSE,<li><a href="https://www.youtube.com/watch?v=x0725PDUho8">https://www.youtube.com/watch?v=x0725PDUho8</a> - SSE v&#160;.Net 10.</ol><h2 id=streaming-html>Streaming HTML</h2><p>Streaming HTML je ako názov napovedá posielanie posielanie kúskov HTML otvoreným spojením. Podobne ako SSE ťaží z&#160;HTTP/2.<p>Predstavte si príklad sociálnej siete, kde&#160;pri prvom načítaní stránky, sa vám zobrazí layout s&#160;nejakými základnými údajmi, ale&#160;zoznam kontaktov, nástenka a&#160;notifikácie sa vám načítajú neskôr asynchrónne. Vďaka streamingu HTML a&#160;modernému HTML to ide spraviť v&#160;jednom requeste, bez&#160;toho aby&#160;používateľ čakal. Proste sa najskôr pošle celý layout a&#160;následne sa server pozrie do&#160;svojho dátového úložiska, čo&#160;nejaký čas trvá a&#160;následne ich pošle ako ďalšie kusy HTML, ktoré prehliadač umiestni na&#160;správne miesto.<p>Ide na&#160;to použiť tagy <code>template</code> a&#160;<code>slot</code>. Ako v&#160;nasledujúcej ukážke (pozor na&#160;uzatváracie tagy):<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>&lt;</span><span style=color:#A31515>html</span> <span style=color:Red>lang</span><span style=color:Blue>=</span><span style=color:Blue>&quot;en&quot;</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;</span><span style=color:#A31515>head</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>meta</span> <span style=color:Red>charset</span><span style=color:Blue>=</span><span style=color:Blue>&quot;utf-8&quot;</span> <span style=color:Blue>/&gt;</span>  
<span style=color:Blue>&lt;/</span><span style=color:#A31515>head</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;</span><span style=color:#A31515>body</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>template</span> <span style=color:Red>shadowrootmode</span><span style=color:Blue>=</span><span style=color:Blue>&quot;open&quot;</span><span style=color:Blue>&gt;</span>  
    <span style=color:Blue>&lt;</span><span style=color:#A31515>header</span><span style=color:Blue>&gt;</span>
    <span style=color:Blue>&lt;</span><span style=color:#A31515>h1</span><span style=color:Blue>&gt;</span>Streaming HTML - best food<span style=color:Blue>&lt;/</span><span style=color:#A31515>h1</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;/</span><span style=color:#A31515>header</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>main</span><span style=color:Blue>&gt;</span>
    <span style=color:Blue>&lt;</span><span style=color:#A31515>slot</span> <span style=color:Red>name</span><span style=color:Blue>=</span><span style=color:Blue>&quot;content&quot;</span><span style=color:Blue>&gt;</span>Loading content&#8230;<span style=color:Blue>&lt;/</span><span style=color:#A31515>slot</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;/</span><span style=color:#A31515>main</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>footer</span><span style=color:Blue>&gt;</span>Footer (c) 2025<span style=color:Blue>&lt;/</span><span style=color:#A31515>a</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>footer</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;/</span><span style=color:#A31515>template</span><span style=color:Blue>&gt;</span>
</pre></div></div><p>Prvým načítaním sa načítal jednoduchý layout, kde&#160;sa zobrazí hlavička a&#160;pätička stránky. Na&#160;serveri sa zistí, koľko obľúbených jedál sa bude zobrazovať a&#160;pošle sa ďalšia časť HTML.<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>&lt;</span><span style=color:#A31515>div</span> <span style=color:Red>slot</span><span style=color:Blue>=</span><span style=color:Blue>&quot;content&quot;</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>template</span> <span style=color:Red>shadowrootmode</span><span style=color:Blue>=</span><span style=color:Blue>&quot;open&quot;</span><span style=color:Blue>&gt;</span>
    <span style=color:Blue>&lt;</span><span style=color:#A31515>p</span><span style=color:Blue>&gt;</span>Food list with poularity:<span style=color:Blue>&lt;/</span><span style=color:#A31515>p</span><span style=color:Blue>&gt;</span>
    <span style=color:Blue>&lt;</span><span style=color:#A31515>ul</span><span style=color:Blue>&gt;</span>
      <span style=color:Blue>&lt;</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;</span><span style=color:#A31515>slot</span> <span style=color:Red>name</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-1&quot;</span><span style=color:Blue>&gt;</span>Loading&#8230;<span style=color:Blue>&lt;/</span><span style=color:#A31515>slot</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span>
      <span style=color:Blue>&lt;</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;</span><span style=color:#A31515>slot</span> <span style=color:Red>name</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-2&quot;</span><span style=color:Blue>&gt;</span>Loading&#8230;<span style=color:Blue>&lt;/</span><span style=color:#A31515>slot</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span>
      <span style=color:Blue>&lt;</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;</span><span style=color:#A31515>slot</span> <span style=color:Red>name</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-3&quot;</span><span style=color:Blue>&gt;</span>Loading&#8230;<span style=color:Blue>&lt;/</span><span style=color:#A31515>slot</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>li</span><span style=color:Blue>&gt;</span>
    <span style=color:Blue>&lt;/</span><span style=color:#A31515>ul</span><span style=color:Blue>&gt;</span>
  <span style=color:Blue>&lt;/</span><span style=color:#A31515>template</span><span style=color:Blue>&gt;</span>
</pre></div></div><p>A následne sa postupne donačítajú jednotlivé jedlá (tu si môžeme predstaviť, že&#160;sa načítajú z&#160;nejakého extra pomalého API po&#160;jednom).<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>span</span> <span style=color:Red>slot</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-1&quot;</span><span style=color:Blue>&gt;</span>Pizza (<span style=color:Blue>&lt;</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>95%<span style=color:Blue>&lt;/</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>)<span style=color:Blue>&lt;/</span><span style=color:#A31515>span</span><span style=color:Blue>&gt;</span>
</pre></div></div><div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>span</span> <span style=color:Red>slot</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-3&quot;</span><span style=color:Blue>&gt;</span>Burger (<span style=color:Blue>&lt;</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>82%<span style=color:Blue>&lt;/</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>)<span style=color:Blue>&lt;/</span><span style=color:#A31515>span</span><span style=color:Blue>&gt;</span>
</pre></div></div><div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
  <span style=color:Blue>&lt;</span><span style=color:#A31515>span</span> <span style=color:Red>slot</span><span style=color:Blue>=</span><span style=color:Blue>&quot;slot-2&quot;</span><span style=color:Blue>&gt;</span>Sushi (<span style=color:Blue>&lt;</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>84%<span style=color:Blue>&lt;/</span><span style=color:#A31515>em</span><span style=color:Blue>&gt;</span>)<span style=color:Blue>&lt;/</span><span style=color:#A31515>span</span><span style=color:Blue>&gt;</span>  
<span style=color:Blue>&lt;/</span><span style=color:#A31515>div</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;/</span><span style=color:#A31515>body</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;/</span><span style=color:#A31515>html</span><span style=color:Blue>&gt;</span>
</pre></div></div><p>Tento spôsob žiaľ funguje iba pri&#160;prvotnom načítaní stránky, takže nejde využiť pri&#160;ajaxových volaniach.<p>Streaming HTML ide pomocou HTMX využiť napríklad na&#160;postupné donačítanie tabuľky už na&#160;vyrendrovanej stránke, alebo&#160;na aktualizáciu rôznych miest cez <code>hx-swap-oob</code>.<p>Ukážka použitia v&#160;HTMX pomocou rozšírenia <a href=https://github.com/douglasduteil/htmx.ext…chunked-transfer>chunked-transfer</a>:<div class="lang-html editor-colors"><div style=color:Black;background-color:White><pre>
<span style=color:Blue>&lt;</span><span style=color:#A31515>button</span> <span style=color:Red>type</span><span style=color:Blue>=</span><span style=color:Blue>&quot;button&quot;</span>
        <span style=color:Red>hx-ext</span><span style=color:Blue>=</span><span style=color:Blue>&quot;chunked-transfer&quot;</span>
        <span style=color:Red>hx-get</span><span style=color:Blue>=</span><span style=color:Blue>&quot;/streaming&quot;</span> 
        <span style=color:Red>hx-target</span><span style=color:Blue>=</span><span style=color:Blue>&quot;next div&quot;</span>
        <span style=color:Red>hx-trigger</span><span style=color:Blue>=</span><span style=color:Blue>&quot;click&quot;</span><span style=color:Blue>&gt;</span>
         Load content
<span style=color:Blue>&lt;/</span><span style=color:#A31515>button</span><span style=color:Blue>&gt;</span>
<span style=color:Blue>&lt;</span><span style=color:#A31515>div</span><span style=color:Blue>&gt;</span><span style=color:Blue>&lt;/</span><span style=color:#A31515>div</span><span style=color:Blue>&gt;</span>
</pre></div></div><p>Prípadne daného loading efektu dosiahnuť pomocou CSS, kde&#160;sa na&#160;klienta posiela vždy aktuálne HTML a&#160;CSS-kom sa skryjú pochádzajúce verzie (<code>display:none;</code> na&#160;elementy v&#160;sekcii a&#160;<code>display:block;</code> na&#160;posledný element).<h3 id=zdroje-ku-streamingu-html>Zdroje ku&#160;streamingu HTML</h3><ol><li><a href=https://dev.to/tigt/the-weirdly-obscure-art-of-streamed-html-4gc2>https://dev.to/tigt/the-weirdly-obscure-art-of-streamed-html-4gc2</a> - <em>The weirdly obscure art of Streamed HTML</em>,<li><a href="https://hypermedia.systems/tricks-of-the-htmx-masters/">https://hypermedia.systems/tricks-of-the-htmx-masters/</a> - <em>Tricks Of The Htmx Masters</em>,<li><a href=https://github.com/douglasduteil/htmx.ext…chunked-transfer>https://github.com/douglasduteil/htmx.ext&#8230;chunked-transfer</a> - <em>HTMX extension pre&#160;streaming HTML</em>.</ol><h2 id=zaver>Záver</h2><p>HTMX je zaujímavý nástroj, ktorý&#160;umožňuje vytvárať serverom riadené klientske aplikácie. Sám by som ho prirovnal ku&#160;nožíku švšvajčiarskej armády pre&#160;HTML.<p>Medzi výčitky voči nemu je, že&#160;komplexnosť sa presunula na&#160;server, čo&#160;je pravda len čiastočne, lebo&#160;pri mnohých typoch aplikácii prináša odstránenie niekoľkých vrstiev (napríklad taký router už prehliadač implementuje sám), navyše na&#160;serveri sa zvyčajne používa o&#160;dosť lepší a&#160;výkonnejší jazyk ako v&#160;prehliadači.<p>Za mňa HTMX, SSE a&#160;streaming HTML predstavujú odpoveď na&#160;komplexnosť forntendu pre&#160;bakcned programátorov.</div><div class="col-lg-4 col-md-4 hidden-xs hidden-sm"><div class=well><h4>V&#xFD;voj</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/ModerneHtml.html>Renderova&#x165; HTML na serveri nie je hanba</a><li><a href=/InterpolatedStringAsHtmlTemplate.html>Interpolated strings ako HTML &#x161;abl&#xF3;na</a><li><a href=/PqcCert.html>Hybridn&#xE9; certifik&#xE1;ty v C#</a><li><a href=/1brc.html>One Billion Rows Challenge</a><li><a href=/MigraciaBlogu.html>Migr&#xE1;cia blogu</a><li><a href=/PostKvantovaKryptografia.html>Post-kvantov&#xE1; kryptografia v C#</a><li><a href=/BouncyHsm.html>Ako som robil BouncyHsm</a><li><a href=/BuildAutomation.html>Pre&#x10D;o pou&#x17E;&#xED;va&#x165; build automation</a><li><a href=/KeyValueDB.html>Ako na Key-Value datab&#xE1;zu</a><li><a href=/RankFunctions.html>MS SQL a RANK funkcie</a><li><a href=/DevelopingAll.html>&#8230;</a></ul></div></div></div><div class=well><h4>V&#x161;eobecn&#xE9;</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/EzoGenerator.html>Gener&#xE1;tor Ezo textov</a><li><a href=/AlternativnyRecept.html>Propag&#xE1;cia alternat&#xED;vnej medic&#xED;ny</a><li><a href=/VotrelciDavnoveku.html>Votrelci d&#xE1;vnoveku</a><li><a href=/GeneralAll.html>&#8230;</a></ul></div></div></div><div class=well><h4>O mne</h4><div class=row><div class=col-lg-12><ul class=list-unstyled><li><a href=/VyvojarskeOdkazy.html>Moje vyvojarske blogy</a><li><a href=/OMne.html>O mne</a><li><a href=/OMneOdkazy.html>Moja tvorba inde</a><li><a href=/Portfolio.html>Portólio</a></ul></div></div></div></div></div><hr><footer><div class="row no-print"><div class="col-lg-8 col-sm-8"><div class=well><h4>Našli ste chybu, alebo chcete niečo doplniť?</h4><p>Ak ste našli chybu v článu, chcete niečo dopniť, alebo sa vyjadriť k téme, môžete na <a href="https://github.com/harrison314/harrison314.github.io/issues/new?title=Renderova%C5%A5%20HTML%20na%20serveri%20nie%20je%20hanba&amp;body=https%3A%2F%2Fharrison314.github.io%2FModerneHtml.html" target=_blank>Githube otvoriť issue</a>.</div></div></div><div class=row><div class=col-lg-12><p>Copyright &copy; harrison314 2013<span class=on-print> - https://harrison314.github.io/</span></div></div></footer></div><script src=js/jquery.js></script><script src=js/bootstrap.min.js></script>